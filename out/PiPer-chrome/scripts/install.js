var a;a||(a=!0,(()=>{// Input 0
const LOGGING_LEVEL$$module$defines = 0;
const BROWSER$$module$defines = 0;
var module$defines = {};
module$defines.BROWSER = BROWSER$$module$defines;
module$defines.LOGGING_LEVEL = LOGGING_LEVEL$$module$defines;
// Input 1
const loggingPrefix$$module$logger = "[PiPer] ";
const LoggingLevel$$module$logger = {ALL:0, TRACE:10, INFO:20, WARNING:30, ERROR:40,};
const trace$$module$logger = LoggingLevel$$module$logger.TRACE >= LOGGING_LEVEL$$module$defines ? console.trace.bind(console) : function() {
};
const info$$module$logger = LoggingLevel$$module$logger.INFO >= LOGGING_LEVEL$$module$defines ? console.info.bind(console, loggingPrefix$$module$logger) : function() {
};
const warn$$module$logger = LoggingLevel$$module$logger.WARNING >= LOGGING_LEVEL$$module$defines ? console.warn.bind(console, loggingPrefix$$module$logger) : function() {
};
const error$$module$logger = LoggingLevel$$module$logger.ERROR >= LOGGING_LEVEL$$module$defines ? console.error.bind(console, loggingPrefix$$module$logger) : function() {
};
var module$logger = {};
module$logger.LoggingLevel = LoggingLevel$$module$logger;
module$logger.error = error$$module$logger;
module$logger.info = info$$module$logger;
module$logger.trace = trace$$module$logger;
module$logger.warn = warn$$module$logger;
// Input 2
const localizations$$module$localization = {};
localizations$$module$localization["button-title"] = {"en":"Open Picture in Picture mode", "de":"Bild-in-Bild starten", "nl":"Beeld in beeld starten", "fr":"D\u00e9marrer Image dans l\u2019image",};
localizations$$module$localization["donate"] = {"en":"Donate", "de":"Spenden",};
localizations$$module$localization["donate-small"] = {"en":"Small donation",};
localizations$$module$localization["donate-medium"] = {"en":"Medium donation",};
localizations$$module$localization["donate-large"] = {"en":"Grand donation",};
localizations$$module$localization["total-donations"] = {"en":"Total donations:",};
localizations$$module$localization["donate-error"] = {"en":"In-app purchase unavailable",};
localizations$$module$localization["report-bug"] = {"en":"Report a bug", "de":"Einen Fehler melden",};
localizations$$module$localization["options"] = {"en":"Options",};
localizations$$module$localization["install-thanks"] = {"en":"Thanks for adding PiPer!",};
localizations$$module$localization["enable"] = {"en":"Enable",};
localizations$$module$localization["safari-disabled-warning"] = {"en":"Extension is currently disabled, enable in Safari preferences",};
localizations$$module$localization["chrome-flags-open"] = {"en":"Open Chrome Flags",};
localizations$$module$localization["chrome-flags-warning"] = {"en":'Before you get started you need to enable the chrome flag [emphasis]"SurfaceLayer objects for videos"[/emphasis]',};
const defaultLanguage$$module$localization = "en";
const localizedString$$module$localization = function(key, language = navigator.language.substring(0, 2)) {
  const localizationsForKey = localizations$$module$localization[key];
  if (localizationsForKey) {
    let string = localizationsForKey[language] || localizationsForKey[defaultLanguage$$module$localization];
    if (string) {
      return string;
    }
  }
  error$$module$logger(`No localized string found for key '${key}'`);
  return "";
};
const localizedStringWithReplacements$$module$localization = function(key, replacements, language) {
  let string = localizedString$$module$localization(key, language);
  for (let index = replacements.length; index--;) {
    let replacement = replacements[index];
    if (/[^-_0-9a-zA-Z\/]/.test(replacement[0])) {
      error$$module$logger(`Invalid characters used in localized string tag '${replacement[0]}'`);
    }
    const regex = new RegExp(`\\\[${replacement[0]}\\\]`, "g");
    string = string.replace(regex, replacement[1]);
  }
  return string;
};
var module$localization = {};
module$localization.localizedString = localizedString$$module$localization;
module$localization.localizedStringWithReplacements = localizedStringWithReplacements$$module$localization;
// Input 3
const htmlTag$$module$install = document.getElementsByTagName("html")[0];
htmlTag$$module$install.style.display = "none";
document.addEventListener("DOMContentLoaded", function() {
  const localizedElements = document.getElementsByClassName("localized-string");
  for (let index = 0, element; element = localizedElements[index]; index++) {
    const key = element.textContent.trim();
    let string;
    if (key == "chrome-flags-warning") {
      string = localizedStringWithReplacements$$module$localization(key, [["emphasis", '<span class="warning-emphasis">'], ["/emphasis", "</span>"],]);
    } else {
      string = localizedString$$module$localization(key);
    }
    element.innerHTML = string;
  }
  htmlTag$$module$install.style.removeProperty("display");
  document.getElementById("warning-button").addEventListener("click", function(event) {
    chrome.tabs.create({url:"chrome://flags/#enable-surfaces-for-videos"});
  });
  const video = document.getElementById("test-video");
  video.addEventListener("loadeddata", function() {
    video.requestPictureInPicture().catch(function(error) {
      const errorMessage = error.message;
      if (~errorMessage.indexOf("Picture-in-Picture is not available")) {
        info$$module$logger("Picture-in-Picture NOT supported");
        document.getElementById("warning").style.display = "flex";
      } else {
        info$$module$logger("Picture-in-Picture IS supported");
      }
    });
  });
});
var module$install = {};
})());
//# sourceMappingURL=data:application/json;base64,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L2xvY2FsaXphdGlvbi5qcyIsIi4vaW5zdGFsbC5qcyJdLAoic291cmNlc0NvbnRlbnQiOlsiLyoqIEBkZWZpbmUge251bWJlcn0gLSBGbGFnIHVzZWQgYnkgY2xvc3VyZSBjb21waWxlciB0byBzZXQgbG9nZ2luZyBsZXZlbCAqL1xuZXhwb3J0IGNvbnN0IExPR0dJTkdfTEVWRUwgPSAwO1xuXG4vKiogQGRlZmluZSB7bnVtYmVyfSAtIEZsYWcgdXNlZCBieSBjbG9zdXJlIGNvbXBpbGVyIHRvIHRhcmdldCBzcGVjaWZpYyBicm93c2VyICovXG5leHBvcnQgY29uc3QgQlJPV1NFUiA9IDA7IiwiaW1wb3J0IHsgTE9HR0lOR19MRVZFTCB9IGZyb20gJy4vZGVmaW5lcy5qcydcblxuY29uc3QgbG9nZ2luZ1ByZWZpeCA9ICdbUGlQZXJdICc7XG5cbi8qKiBAZW51bSB7bnVtYmVyfSAtIEVudW0gZm9yIGxvZ2dpbmcgbGV2ZWwgKi9cbmV4cG9ydCBjb25zdCBMb2dnaW5nTGV2ZWwgPSB7XG4gIEFMTDogMCxcbiAgVFJBQ0U6IDEwLFxuICBJTkZPOiAyMCxcbiAgV0FSTklORzogMzAsXG4gIEVSUk9SOiA0MCxcbn07XG5cbi8qKlxuICogTG9ncyBzdGFjayB0cmFjZSB0byBjb25zb2xlXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFjZSA9IChMb2dnaW5nTGV2ZWwuVFJBQ0UgPj0gTE9HR0lOR19MRVZFTCkgPyBcbiAgICBjb25zb2xlLnRyYWNlLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbigpe307XG5cbi8qKlxuICogTG9ncyBpbmZvcm1hdGlvbmFsIG1lc3NhZ2UgdG8gY29uc29sZVxuICovXG5leHBvcnQgY29uc3QgaW5mbyA9IChMb2dnaW5nTGV2ZWwuSU5GTyA+PSBMT0dHSU5HX0xFVkVMKSA/IFxuICAgIGNvbnNvbGUuaW5mby5iaW5kKGNvbnNvbGUsIGxvZ2dpbmdQcmVmaXgpIDogZnVuY3Rpb24oKXt9O1xuICAgIFxuLyoqXG4gKiBMb2dzIHdhcm5pbmcgbWVzc2FnZSB0byBjb25zb2xlXG4gKi9cbmV4cG9ydCBjb25zdCB3YXJuID0gKExvZ2dpbmdMZXZlbC5XQVJOSU5HID49IExPR0dJTkdfTEVWRUwpID8gXG4gICAgY29uc29sZS53YXJuLmJpbmQoY29uc29sZSwgbG9nZ2luZ1ByZWZpeCkgOiBmdW5jdGlvbigpe307XG4gICAgXG4vKipcbiAqIExvZ3MgZXJyb3IgbWVzc2FnZSB0byBjb25zb2xlXG4gKi9cbmV4cG9ydCBjb25zdCBlcnJvciA9IChMb2dnaW5nTGV2ZWwuRVJST1IgPj0gTE9HR0lOR19MRVZFTCkgPyBcbiAgICBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSwgbG9nZ2luZ1ByZWZpeCkgOiBmdW5jdGlvbigpe307IiwiaW1wb3J0IHsgZXJyb3IgfSBmcm9tICcuL2xvZ2dlci5qcydcblxuY29uc3QgbG9jYWxpemF0aW9ucyA9IHt9O1xuXG5sb2NhbGl6YXRpb25zWydidXR0b24tdGl0bGUnXSA9IHtcbiAgJ2VuJzogJ09wZW4gUGljdHVyZSBpbiBQaWN0dXJlIG1vZGUnLFxuICAnZGUnOiAnQmlsZC1pbi1CaWxkIHN0YXJ0ZW4nLFxuICAnbmwnOiAnQmVlbGQgaW4gYmVlbGQgc3RhcnRlbicsXG4gICdmcic6ICdEXHUwMGU5bWFycmVyIEltYWdlIGRhbnMgbFx1MjAxOWltYWdlJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ2RvbmF0ZSddID0ge1xuICAnZW4nOiAnRG9uYXRlJyxcbiAgJ2RlJzogJ1NwZW5kZW4nLFxufTtcblxubG9jYWxpemF0aW9uc1snZG9uYXRlLXNtYWxsJ10gPSB7XG4gICdlbic6ICdTbWFsbCBkb25hdGlvbicsXG59O1xuXG5sb2NhbGl6YXRpb25zWydkb25hdGUtbWVkaXVtJ10gPSB7XG4gICdlbic6ICdNZWRpdW0gZG9uYXRpb24nLFxufTtcblxubG9jYWxpemF0aW9uc1snZG9uYXRlLWxhcmdlJ10gPSB7XG4gICdlbic6ICdHcmFuZCBkb25hdGlvbicsXG59O1xuXG5sb2NhbGl6YXRpb25zWyd0b3RhbC1kb25hdGlvbnMnXSA9IHtcbiAgJ2VuJzogJ1RvdGFsIGRvbmF0aW9uczonLFxufTtcblxubG9jYWxpemF0aW9uc1snZG9uYXRlLWVycm9yJ10gPSB7XG4gICdlbic6ICdJbi1hcHAgcHVyY2hhc2UgdW5hdmFpbGFibGUnLFxufTtcblxubG9jYWxpemF0aW9uc1sncmVwb3J0LWJ1ZyddID0ge1xuICAnZW4nOiAnUmVwb3J0IGEgYnVnJyxcbiAgJ2RlJzogJ0VpbmVuIEZlaGxlciBtZWxkZW4nLFxufTtcblxubG9jYWxpemF0aW9uc1snb3B0aW9ucyddID0ge1xuICAnZW4nOiAnT3B0aW9ucycsXG59O1xuXG5sb2NhbGl6YXRpb25zWydpbnN0YWxsLXRoYW5rcyddID0ge1xuICAnZW4nOiAnVGhhbmtzIGZvciBhZGRpbmcgUGlQZXIhJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ2VuYWJsZSddID0ge1xuICAnZW4nOiAnRW5hYmxlJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ3NhZmFyaS1kaXNhYmxlZC13YXJuaW5nJ10gPSB7XG4gICdlbic6ICdFeHRlbnNpb24gaXMgY3VycmVudGx5IGRpc2FibGVkLCBlbmFibGUgaW4gU2FmYXJpIHByZWZlcmVuY2VzJyxcbn07XG5cbmxvY2FsaXphdGlvbnNbJ2Nocm9tZS1mbGFncy1vcGVuJ10gPSB7XG4gICdlbic6ICdPcGVuIENocm9tZSBGbGFncycsXG59O1xuXG5sb2NhbGl6YXRpb25zWydjaHJvbWUtZmxhZ3Mtd2FybmluZyddID0ge1xuICAnZW4nOiAnQmVmb3JlIHlvdSBnZXQgc3RhcnRlZCB5b3UgbmVlZCB0byBlbmFibGUgdGhlIGNocm9tZSBmbGFnIFtlbXBoYXNpc11cIlN1cmZhY2VMYXllciBvYmplY3RzIGZvciB2aWRlb3NcIlsvZW1waGFzaXNdJyxcbn07XG5cbi8vIFNldCBFbmdsaXNoIGFzIHRoZSBkZWZhdWx0IGZhbGxiYWNrIGxhbmd1YWdlXG5jb25zdCBkZWZhdWx0TGFuZ3VhZ2UgPSAnZW4nO1xuXG4vKipcbiAqIFJldHVybnMgYSBsb2NhbGl6ZWQgdmVyc2lvbiBvZiB0aGUgc3RyaW5nIGRlc2lnbmF0ZWQgYnkgdGhlIHNwZWNpZmllZCBrZXlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBmb3IgYSBzdHJpbmcgXG4gKiBAcGFyYW0ge3N0cmluZz19IGxhbmd1YWdlIC0gdHdvLWxldHRlciBJU08gNjM5LTEgbGFuZ3VhZ2UgY29kZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgbG9jYWxpemVkU3RyaW5nID0gZnVuY3Rpb24oa2V5LCBsYW5ndWFnZSA9IG5hdmlnYXRvci5sYW5ndWFnZS5zdWJzdHJpbmcoMCwgMikpIHtcbiAgXG4gIC8vIEdldCBhbGwgbG9jYWxpemF0aW9ucyBmb3Iga2V5XG4gIGNvbnN0IC8qKiBPYmplY3Q8c3RyaW5nLHN0cmluZz4gKi8gbG9jYWxpemF0aW9uc0ZvcktleSA9IGxvY2FsaXphdGlvbnNba2V5XTtcbiAgaWYgKGxvY2FsaXphdGlvbnNGb3JLZXkpIHtcbiAgICBcbiAgICAvLyBHZXQgdGhlIHVzZXJzIHNwZWNpZmljIGxvY2FsaXphdGlvbiBvciBmYWxsYmFjayB0byBkZWZhdWx0IGxhbmd1YWdlXG4gICAgbGV0IHN0cmluZyA9IGxvY2FsaXphdGlvbnNGb3JLZXlbbGFuZ3VhZ2VdIHx8IGxvY2FsaXphdGlvbnNGb3JLZXlbZGVmYXVsdExhbmd1YWdlXTtcbiAgICBpZiAoc3RyaW5nKSByZXR1cm4gc3RyaW5nO1xuICB9XG4gIFxuICBlcnJvcihgTm8gbG9jYWxpemVkIHN0cmluZyBmb3VuZCBmb3Iga2V5ICcke2tleX0nYCk7XG4gIHJldHVybiAnJztcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGxvY2FsaXplZCB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcgZGVzaWduYXRlZCBieSB0aGUgc3BlY2lmaWVkIGtleSB3aXRoIHRhZ3MgcmVwbGFjZWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBmb3IgYSBzdHJpbmcgXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PHN0cmluZz4+fSByZXBsYWNlbWVudHMgLSBhbiBhcnJheSBvZiBhcnJheXMgY29udGFpbmluZyBwYWlycyBvZiB0YWdzIGFuZCB0aGVpciByZXBsYWNlbWVudFxuICogQHBhcmFtIHtzdHJpbmc9fSBsYW5ndWFnZSAtIHR3by1sZXR0ZXIgSVNPIDYzOS0xIGxhbmd1YWdlIGNvZGVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IGxvY2FsaXplZFN0cmluZ1dpdGhSZXBsYWNlbWVudHMgPSBmdW5jdGlvbihrZXksIHJlcGxhY2VtZW50cywgbGFuZ3VhZ2UpIHtcbiAgXG4gIGxldCBzdHJpbmcgPSBsb2NhbGl6ZWRTdHJpbmcoa2V5LCBsYW5ndWFnZSk7XG4gIFxuICAvLyBSZXBsYWNlIHRhZ3Mgb2YgdGhlIGZvcm0gW1hYWF0gd2l0aCBkaXJlY3RlZCByZXBsYWNlbWVudHMgaWYgbmVlZGVkXG4gIGZvciAobGV0IGluZGV4ID0gcmVwbGFjZW1lbnRzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG4gICAgbGV0IHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnRzW2luZGV4XTtcbiAgICBcbiAgICAvLyBFbnN1cmUgdGFncyBkbyBub3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMgKHRoaXMgZ2V0cyBvcHRpbWlzZWQgYXdheSBhcyBvcHBvc2VkIHRvIGVzY2FwaW5nIHRoZSB0YWdzIHdpdGggdGhlIGFzc29jaWF0ZWQgcGVyZm9ybWFuY2UgY29zdClcbiAgICBpZiAoL1teLV8wLTlhLXpBLVpcXC9dLy50ZXN0KHJlcGxhY2VtZW50WzBdKSkge1xuICAgICAgZXJyb3IoYEludmFsaWQgY2hhcmFjdGVycyB1c2VkIGluIGxvY2FsaXplZCBzdHJpbmcgdGFnICcke3JlcGxhY2VtZW50WzBdfSdgKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBcXFxcXFxbJHtyZXBsYWNlbWVudFswXX1cXFxcXFxdYCwgJ2cnKTtcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleCwgcmVwbGFjZW1lbnRbMV0pO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZztcbn07XG4iLCJpbXBvcnQgeyBpbmZvIH0gZnJvbSAnLi9sb2dnZXIuanMnXG5pbXBvcnQgeyBsb2NhbGl6ZWRTdHJpbmcsIGxvY2FsaXplZFN0cmluZ1dpdGhSZXBsYWNlbWVudHMgfSBmcm9tICcuL2xvY2FsaXphdGlvbi5qcydcblxuLy8gSGlkZSBwYWdlIGR1cmluZyBsb2FkaW5nXG5jb25zdCBodG1sVGFnID0gLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi8gKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXSk7XG5odG1sVGFnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblxuICAvLyBMb2NhbGl6ZSB0ZXh0IGVsZW1lbnRzXG4gIGNvbnN0IGxvY2FsaXplZEVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbG9jYWxpemVkLXN0cmluZycpO1xuICBmb3IgKGxldCBpbmRleCA9IDAsIGVsZW1lbnQ7IGVsZW1lbnQgPSBsb2NhbGl6ZWRFbGVtZW50c1tpbmRleF07IGluZGV4KyspIHtcbiAgICBjb25zdCBrZXkgPSBlbGVtZW50LnRleHRDb250ZW50LnRyaW0oKTtcbiAgICBcbiAgICBsZXQgc3RyaW5nO1xuICAgIGlmIChrZXkgPT0gJ2Nocm9tZS1mbGFncy13YXJuaW5nJykge1xuICAgICAgc3RyaW5nID0gbG9jYWxpemVkU3RyaW5nV2l0aFJlcGxhY2VtZW50cyhrZXksIFtcbiAgICAgICAgWydlbXBoYXNpcycsICc8c3BhbiBjbGFzcz1cIndhcm5pbmctZW1waGFzaXNcIj4nXSxcbiAgICAgICAgWycvZW1waGFzaXMnLCAnPC9zcGFuPiddLFxuICAgICAgXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cmluZyA9IGxvY2FsaXplZFN0cmluZyhrZXkpO1xuICAgIH0gXG4gICAgXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBzdHJpbmc7XG4gIH1cblxuICAvLyBNYWtlIHBhZ2UgdmlzaWJsZVxuICBodG1sVGFnLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG5cbiAgLy8gT3BlbiByZXF1aXJlZCBDaHJvbWUgZmxhZyBpZiB3YXJuaW5nIGJ1dHRvbiBjbGlja2VkXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBjaHJvbWUudGFicy5jcmVhdGUoe3VybDogJ2Nocm9tZTovL2ZsYWdzLyNlbmFibGUtc3VyZmFjZXMtZm9yLXZpZGVvcyd9KTtcbiAgfSk7XG4gIFxuICAvLyBUZXN0IGZvciBQaWN0dXJlIGluIFBpY3R1cmUgc3VwcG9ydCBhbmQgZGlzcGxheSB3YXJuaW5nIHRvIGFjdGl2YXRlIENocm9tZSBmbGFncyBpZiBuZWVkZWRcbiAgY29uc3QgdmlkZW8gPSAvKiogQHR5cGUge0hUTUxWaWRlb0VsZW1lbnR9ICovIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdC12aWRlbycpKTtcbiAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsIGZ1bmN0aW9uKCkge1xuICAgIHZpZGVvLnJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlKCkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IC8qKiBAdHlwZSB7RXJyb3J9ICovIChlcnJvcikubWVzc2FnZTtcbiAgICAgIGlmICh+ZXJyb3JNZXNzYWdlLmluZGV4T2YoJ1BpY3R1cmUtaW4tUGljdHVyZSBpcyBub3QgYXZhaWxhYmxlJykpIHtcbiAgICAgICAgaW5mbygnUGljdHVyZS1pbi1QaWN0dXJlIE5PVCBzdXBwb3J0ZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmcnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5mbygnUGljdHVyZS1pbi1QaWN0dXJlIElTIHN1cHBvcnRlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pOyJdLAoibmFtZXMiOlsiTE9HR0lOR19MRVZFTCIsIkJST1dTRVIiLCIkanNjb21wJHRtcCRleHBvcnRzJG1vZHVsZSRuYW1lIiwibG9nZ2luZ1ByZWZpeCIsIkxvZ2dpbmdMZXZlbCIsIkFMTCIsIlRSQUNFIiwiSU5GTyIsIldBUk5JTkciLCJFUlJPUiIsInRyYWNlIiwiY29uc29sZSIsImJpbmQiLCJpbmZvIiwid2FybiIsImVycm9yIiwibG9jYWxpemF0aW9ucyIsImRlZmF1bHRMYW5ndWFnZSIsImxvY2FsaXplZFN0cmluZyIsImtleSIsImxhbmd1YWdlIiwibmF2aWdhdG9yIiwic3Vic3RyaW5nIiwibG9jYWxpemF0aW9uc0ZvcktleSIsInN0cmluZyIsImxvY2FsaXplZFN0cmluZ1dpdGhSZXBsYWNlbWVudHMiLCJyZXBsYWNlbWVudHMiLCJpbmRleCIsImxlbmd0aCIsInJlcGxhY2VtZW50IiwidGVzdCIsInJlZ2V4IiwiUmVnRXhwIiwicmVwbGFjZSIsImh0bWxUYWciLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3R5bGUiLCJkaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2FsaXplZEVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJpbm5lckhUTUwiLCJyZW1vdmVQcm9wZXJ0eSIsImdldEVsZW1lbnRCeUlkIiwiZXZlbnQiLCJjaHJvbWUiLCJ0YWJzIiwiY3JlYXRlIiwidXJsIiwidmlkZW8iLCJyZXF1ZXN0UGljdHVyZUluUGljdHVyZSIsImNhdGNoIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsImluZGV4T2YiXQp9Cg==
